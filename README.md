# OpenAI Agents SDK サンプルプロジェクト

このプロジェクトは、OpenAI Agents SDKを使用した簡単なデモアプリケーションです。Streamlit UIを通じて複数のエージェントを設定・実行できます。

## 概要

OpenAI Agents SDKを使用して、GPT-4やGPT-3.5-turboモデルを活用したインタラクティブなエージェントを作成できます。Streamlit UIでエージェントの設定を簡単にカスタマイズすることができます。

## 特徴

- Docker/Docker Composeを使用した簡単なセットアップ
- 環境変数を使用したAPIキーの安全な管理
- Python 3.11環境
- モジュール化された設計でメンテナンスが容易
- Streamlit UIでエージェント設定の簡単カスタマイズ
  - エージェント名の設定
  - 指示（プロンプト）の編集
  - モデルの選択（GPT-3.5-turbo、GPT-4など）
  - 複数のエージェントプリセット
- ホットリロード対応の開発環境
- **新機能: マルチエージェントビルダー**
  - 複数のエージェントを作成・管理
  - エージェント間の接続とワークフロー構築
  - ビジュアルフローエディタ
  - フロー実行機能

## セットアップ方法

### 前提条件

- Docker
- Docker Compose

### 実行方法

1. `.env`ファイルにOpenAI APIキーを設定します：

```
OPENAI_API_KEY=your_api_key_here
```

2. Docker Composeでアプリケーションを起動します：

```bash
# 初回または依存関係が変更された場合に使用
docker-compose up --build

# 2回目以降はシンプルに以下を実行（ビルドをスキップ）
docker-compose up
```

3. ブラウザで以下のURLにアクセスしてStreamlit UIを開きます：

```
# 通常のエージェントUI
http://localhost:8501

# マルチエージェントビルダーUI
http://localhost:8502
```

### 開発効率向上のポイント

- `docker-compose up` コマンドはコードの変更をホットリロードします（Streamlitのライブリロード機能）
- 依存パッケージは `requirements.txt` で管理されており、変更がない限りDockerビルドがキャッシュされます
- コード変更時は自動的に反映されるため、コンテナの再起動は不要です

## プロジェクト構成

```
.
├── src/                 # ソースコードディレクトリ
│   ├── agent_builder/   # エージェントビルダー機能
│   │   ├── agent_types.py    # エージェント定義
│   │   └── builder_ui.py     # ビルダーUI
│   ├── agent_flow/      # エージェントフロー機能
│   │   ├── flow_builder_ui.py # フロービルダーUI
│   │   └── flow_runtime.py    # フロー実行エンジン
│   ├── config/          # 設定関連
│   │   └── settings.py  # アプリケーション設定
│   ├── models/          # モデル関連
│   │   └── agent.py     # エージェント管理クラス
│   ├── ui/              # ユーザーインターフェース関連
│   │   ├── sidebar.py   # サイドバーコンポーネント
│   │   ├── chat.py      # チャットコンポーネント
│   │   └── guide.py     # ヘルプガイド
│   └── utils/           # ユーティリティ関数
│       └── async_helpers.py  # 非同期処理ヘルパー
├── app.py               # メインアプリケーション（シングルエージェント版）
├── app_multi_agent.py   # マルチエージェントアプリケーション
├── Dockerfile           # Python 3.11のDockerイメージ設定
├── README.md            # プロジェクト説明（このファイル）
├── docker-compose.yml   # Docker Compose設定
├── requirements.txt     # 必要なPythonパッケージリスト
├── .env                 # 環境変数設定（APIキーなど）
└── .env.sample          # 環境変数設定サンプル
```

## モジュール構造

- **agent_builder**: エージェント作成・管理機能
- **agent_flow**: エージェントフロー構築・実行機能
- **config**: アプリケーション設定を管理
- **models**: AIエージェントとの対話を担当
- **ui**: Streamlitベースのユーザーインターフェースコンポーネント
- **utils**: 共通ユーティリティ関数

## マルチエージェントビルダーの使い方

マルチエージェントビルダーでは、複数のAIエージェントを連携させたワークフローを構築できます。

1. **エージェントビルダー**タブで、ワークフローに使用するエージェントを作成します
   - 名前、指示、モデル、ツールを設定
   - 設定したエージェントは自動的に保存されます

2. **フロービルダー**タブで、エージェント間の接続を設定します
   - フロー名と説明を入力
   - 使用するエージェントを選択
   - エージェント間の接続タイプを設定（ハンドオフ/順次実行/条件分岐）
   - フロー図でワークフローを可視化

3. **フロー実行**タブで、構築したフローを実行します
   - 実行するフローを選択
   - メッセージを入力して実行
   - 実行結果とログを確認

### 接続タイプの説明

- **ハンドオフ**: 1つのエージェントから別のエージェントに会話を引き継ぎます
- **順次実行**: 1つのエージェントの出力を次のエージェントの入力として使用します
- **条件分岐**: 条件に基づいて次に実行するエージェントを決定します

## OpenAI Agents SDKについて

OpenAI Agents SDKは、マルチエージェントワークフローを構築するための軽量かつ強力なフレームワークです。詳細については[公式ドキュメント](https://openai.github.io/openai-agents-python/)を参照してください。 